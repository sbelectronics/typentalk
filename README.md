# Votrax Type N Talk Text To Speech, converted to C++

Scott Baker, http://www.smbaker.com/

This is a port of the Votrax Type N Talk from 6800 assembly
to C++. It's ugly and nasty and has undergone only minimal
work to make it appropriate for a high-level language.

The goal is to be able to reproduce the T n T text-to-phoneme
algorithm,

## Arduino version

The arduino version runs on an ATMEGA328 microncontroller and is
expected to be connected to a real Votrax SC-01a. These are a little
hard to find.

The code implements the text-to-speech conversion rules, with a few
additional features.

### Extended escape sequences

The votrax sequences (ESC followed by a low-ASCII code) are really
hard to use, so I implemented some ascii tokens that work the same
way. They use double curly braces at the start and stop.

* {{psendon}} and {{psendoff}}. Default Off. If psend mode is on, then phonemes will be written to serial instead of spoken.
* {{echoon}} and {{echooff}}. Default On. Turn character echo on/off.
* {{capson}} and {{capsoff}}. Default Off. If caps mode is on, then any word that starts with two or more upper case letters will be spoken letter-by-letter.
* {{timeron}} and {{timeroff}}. Default On. The timer will cause speech to be spoken if idle for approximately 4 seconds. Otherwise, waits for a CR.
* {{reset}}. Resets the engine.
* {{crlfon}} and {{crlfoff}}. Default off. If on, then outgoing CR will be followed by a LF.
* {{ping}}. Responds with "pong".
* {{daisy}}. Sings Daisy from the Hero Jr. 
* {{volNN}}. Sets the amplifier volume. NN is a two-digit decimal number from 00 to 50.

## Linux version

The Linux version is solely for testing the engine. It doesn't
produce any sound.

`make test` should run the code through a series of tests that
will verify it converts several known words correctly.

There is still much to do. A lot of this is autogenerated.

## Test Cases

The test cases are a set of translations in translations.txt that
were obtained from a simh simulation of the original Type N Talk
ROM binary. Not that they are not assumed to be pronounced "correctly",
they are the raw output of the T n T and the T n T did not pronounce
all English words correctly.

Translations.txt is then parsed by a python program and used to
create a set of C++ test cases, testcases.inc. This is then compiled
as part of the "make test" target.

I tried to generate a variety of words, though I'm sure I didn't hit
every possible phonetic rule in the software. At some point I may go
back and just hit the simulated T n T with a full english dictionary
and generate a test case for every english word, but for now this
sampling will do.

## Acknowledgements

The original assembly source came from a disassembly that
was done by Simon Rowe. Dr. Hugo Holden's article
"Type 'N Talk meets the HERO Jr. ROBOT" was quite useful in
understanding some of the idiosyncracies of the Type N
Talk device.
